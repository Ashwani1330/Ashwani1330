name: Metrics
on:
  # Schedule daily updates (Midnight IST)
  schedule: [{cron: "30 18 * * *"}]
  # (optional) Run workflow manually
  workflow_dispatch:
  # (optional) Run workflow when pushing on master/main
  push: {branches: ["master", "main"]}

jobs:
  github-metrics:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - uses: lowlighter/metrics@latest
        with:
          # Your GitHub token
          token: ${{ secrets.GITHUB_TOKEN }}

          # Options
          user: Ashwani1330
          template: classic
          base: header, activity, community, repositories, metadata
          config_timezone: Asia/Kolkata
          config_display: large
          
          # --- AMBER CRT THEME (Yetone Style) ---
          extras_css: |
            /* Dark Background */
            svg { background-color: #0d1117 !important; border: 1px solid #30363d; border-radius: 6px; }
            
            /* Text - Amber Primary */
            h1, h2, h3, .header { 
              color: #ffa500 !important; 
              text-shadow: 0 0 2px #bfa15f; 
            }
            
            /* Text - White/Grey Secondary */
            .field, .stat { color: #e6edf3 !important; }
            strong { color: #ffa500 !important; }
            
            /* Icons & Charts */
            .icon { fill: #ffa500 !important; }
            .ct-series-a .ct-line, .ct-series-a .ct-point { stroke: #ffa500 !important; }
            .ct-series-a .ct-area { fill: #ffa500 !important; fill-opacity: 0.2; }
            
            /* 3D Calendar Colors */
            .calendar .day { fill: #21262d !important; }
            .calendar .day.l1 { fill: #664200 !important; }
            .calendar .day.l2 { fill: #996300 !important; }
            .calendar .day.l3 { fill: #cc8400 !important; }
            .calendar .day.l4 { fill: #ffa500 !important; }

          # --- PLUGINS (Matching Yetone) ---
          
          # 1. Languages
          plugin_languages: yes
          plugin_languages_ignored: html, css, shell
          plugin_languages_limit: 8
          plugin_languages_details: lines, percentage
          plugin_languages_colors: "kotlin:#ffa500, java:#e0a458, python:#ffca28, typescript:#d4a017, csharp:#ff6f00"
          
          # 2. Isometric Calendar
          plugin_isocalendar: yes
          plugin_isocalendar_duration: full-year
          
          # 3. Lines of Code (Added like Yetone)
          plugin_lines: yes
          
          # 5. Habits (Coding Habits)
          plugin_habits: yes
          plugin_habits_charts_type: classic
          plugin_habits_days: 14
          plugin_habits_facts: yes
          plugin_habits_from: 200